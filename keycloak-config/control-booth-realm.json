{
  "id": "control-booth",
  "realm": "control-booth",
  "displayName": "Control Booth Realm",
  "internationalizationEnabled": true,
  "enabled" : true,
  "supportedLocales": [
    "en",
    "sv"
  ],

  "scopeMappings" : [
    {
      "clientScope" : "offline_access",
      "roles" : [ "offline_access" ]
    }
  ],

  "clients": [
    {
      "clientId": "control-booth",
      "name": "control-booth",
      "description": "Control Booth Client",
      "enabled": true,
      "clientAuthenticatorType": "client-secret",
      "secret": "changed-special-client-secret",
      "directAccessGrantsEnabled": true,
      "secret" : "m842p8DJjR7dBMCObcxBZYGOW1dqpS42",
      "frontchannelLogout" : true,
      "redirectUris": [
        "http://localhost:8080/*",
        "http://control-booth.org:8080/*",
        "http://192.168.2.206:8080/*",
        "http://localhost:3030/*",
        "http://control-booth.org:3030/*",
        "http://192.168.2.206:3030/*"
      ],
      "webOrigins": [
        "http://control-booth.org:8080"
      ],
      "protocolMappers": [
        {
          "name": "BranchCodeMapper",
          "protocol": "openid-connect",
          "protocolMapper": "oidc-usermodel-attribute-mapper",
          "consentRequired": false,
          "config": {
            "aggregate.attrs": "false",
            "userinfo.token.claim": "true",
            "multivalued": "false",
            "user.attribute": "branch",
            "id.token.claim": "false",
            "access.token.claim": "true",
            "claim.name": "branch",
            "jsonType.label": "String"
          }
        }
      ],
      "serviceAccountsEnabled": true,
      "authorizationServicesEnabled": true,
      "authorizationSettings": {
        "allowRemoteResourceManagement": true,
        "policyEnforcementMode": "PERMISSIVE",
        "decisionStrategy": "UNANIMOUS",
        "resources": [
          {
            "name": "Default Resource",
            "uri": "/*",
            "type": "urn:control-booth:resources:default",
            "scopes": []
          }
        ],
        "policies": [
          {
            "name": "Default Policy",
            "description": "A policy that grants access only for users within this realm",
            "type": "js",
            "logic": "POSITIVE",
            "decisionStrategy": "AFFIRMATIVE",
            "config": {
              "code":  "// by default, grants any permission associated with this policy\n$evaluation.grant();\n"
            }
          }
        ],
        "scopes": [
        ]
      }
    }
  ],

  "roles": {
    "realm": [
      {
        "name": "ROLE_CONTROL_BOOTH_USER",
        "composite": false,
        "clientRole": false
      },
      {
        "name": "ROLE_CONTROL_BOOTH_ADMIN",
        "composite": false,
        "clientRole": false
      }      
    ]
  },

  "components": {
    "org.keycloak.storage.UserStorageProvider": [
      {
        "name": "openldap",
        "providerId": "ldap",
        "subComponents": {
          "org.keycloak.storage.ldap.mappers.LDAPStorageMapper": [
            {
              "name": "username",
              "providerId": "user-attribute-ldap-mapper",
              "subComponents": {
              },
              "config": {
                "ldap.attribute": [
                  "uid"
                ],
                "is.mandatory.in.ldap": [
                  "true"
                ],
                "read.only": [
                  "false"
                ],
                "always.read.value.from.ldap": [
                  "false"
                ],
                "user.model.attribute": [
                  "username"
                ]
              }
            },
            {
              "name": "first name",
              "providerId": "user-attribute-ldap-mapper",
              "subComponents": {
              },
              "config": {
                "ldap.attribute": [
                  "givenName"
                ],
                "is.mandatory.in.ldap": [
                  "true"
                ],
                "read.only": [
                  "false"
                ],
                "always.read.value.from.ldap": [
                  "false"
                ],
                "user.model.attribute": [
                  "firstName"
                ]
              }
            },
            {
              "name": "last name",
              "providerId": "user-attribute-ldap-mapper",
              "subComponents": {
              },
              "config": {
                "ldap.attribute": [
                  "sn"
                ],
                "is.mandatory.in.ldap": [
                  "true"
                ],
                "read.only": [
                  "false"
                ],
                "always.read.value.from.ldap": [
                  "false"
                ],
                "user.model.attribute": [
                  "lastName"
                ]
              }
            },
            {
              "name": "email",
              "providerId": "user-attribute-ldap-mapper",
              "subComponents": {
              },
              "config": {
                "ldap.attribute": [
                  "mail"
                ],
                "is.mandatory.in.ldap": [
                  "false"
                ],
                "read.only": [
                  "false"
                ],
                "always.read.value.from.ldap": [
                  "false"
                ],
                "user.model.attribute": [
                  "email"
                ]
              }
            },
            {
              "name": "creation date",
              "providerId": "user-attribute-ldap-mapper",
              "subComponents": {
              },
              "config": {
                "ldap.attribute": [
                  "createTimestamp"
                ],
                "is.mandatory.in.ldap": [
                  "false"
                ],
                "read.only": [
                  "true"
                ],
                "always.read.value.from.ldap": [
                  "false"
                ],
                "user.model.attribute": [
                  "createTimestamp"
                ]
              }
            },
            {
              "name": "modify date",
              "providerId": "user-attribute-ldap-mapper",
              "subComponents": {
              },
              "config": {
                "ldap.attribute": [
                  "modifyTimestamp"
                ],
                "is.mandatory.in.ldap": [
                  "false"
                ],
                "read.only": [
                  "true"
                ],
                "always.read.value.from.ldap": [
                  "false"
                ],
                "user.model.attribute": [
                  "modifyTimestamp"
                ]
              }
            },
            {
              "name": "postal code",
              "providerId": "user-attribute-ldap-mapper",
              "subComponents": {
              },
              "config": {
                "ldap.attribute": [
                  "postalCode"
                ],
                "is.mandatory.in.ldap": [
                  "false"
                ],
                "read.only": [
                  "false"
                ],
                "always.read.value.from.ldap": [
                  "false"
                ],
                "user.model.attribute": [
                  "postal_code"
                ]
              }
            },
            {
              "name": "street",
              "providerId": "user-attribute-ldap-mapper",
              "subComponents": {
              },
              "config": {
                "ldap.attribute": [
                  "street"
                ],
                "is.mandatory.in.ldap": [
                  "false"
                ],
                "read.only": [
                  "false"
                ],
                "always.read.value.from.ldap": [
                  "false"
                ],
                "user.model.attribute": [
                  "street"
                ]
              }
            }
          ]
        },
        "config": {
          "enabled": [
            "true"
          ],
          "fullSyncPeriod": [
            "1200"
          ],
          "pagination": [
            "true"
          ],
          "debug": [
            "false"
          ],
          "searchScope": [
            "1"
          ],
          "connectionPooling": [
            "true"
          ],
          "usersDn": [
            "ou=Users,dc=control-booth,dc=org"
          ],
          "priority": [
            "1"
          ],
          "userObjectClasses": [
            "inetOrgPerson, organizationalPerson"
          ],
          "changedSyncPeriod": [
            "-1"
          ],
          "usernameLDAPAttribute": [
            "uid"
          ],
          "bindDn": [
            "cn=admin,dc=control-booth,dc=org"
          ],
          "bindCredential": [
            "admin"
          ],
          "rdnLDAPAttribute": [
            "uid"
          ],
          "lastSync": [
            "0"
          ],
          "vendor": [
            "other"
          ],
          "editMode": [
            "READ_ONLY"
          ],
          "uuidLDAPAttribute": [
            "entryUUID"
          ],
          "connectionUrl": [
            "ldap://openldap:389"
          ],
          "syncRegistrations": [
            "true"
          ],
          "authType": [
            "simple"
          ]
        }
      }
    ]

  }
}
